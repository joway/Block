$.fn.popImg=function(){var t=$("<div/>").css({position:"fixed",left:0,right:0,top:0,bottom:0,height:"100%",width:"100%",zIndex:9999999,background:"#000",opacity:"0.6",display:"none"}).attr("data-id","b_layer"),i=function(t){var i=t.offset().left,o=t.offset().top,e=t.width(),n=t.height();return t.clone().css({position:"fixed",width:e,height:n,left:i,top:o,zIndex:1e7})},o=function(t){var i=$(window).width(),o=$(window).height();t.css("cursor","zoom-out").attr("data-b-img",1);var e=new Image;e.onload=function(){t.stop().animate({width:this.width,height:this.height,left:(i-this.width)/2,top:(o-this.height)/2},300)},e.src=t.attr("src")};this.each(function(){$(this).css("cursor","zoom-in").on("click",function(){var e=$("body");t.appendTo(e),t.fadeIn(300);var n=i($(this));n.appendTo(e),o(n)})});var e=null;$(window).on("resize",function(){$("img[data-b-img]").each(function(){var t=$(this);e&&clearTimeout(e),e=setTimeout(function(){o(t)},10)})}),$(window).on("click keydown",function(i){"keydown"==i.type&&27===i.keyCode&&(t.fadeOut(300),$("img[data-b-img]").remove());var o=$(i.target);("b_layer"==o.attr("data-id")||1==o.attr("data-b-img"))&&(t.fadeOut(300),$("img[data-b-img]").remove())})};